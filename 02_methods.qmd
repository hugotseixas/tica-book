# Método {#sec-methods}

## Visão Geral

```{r}
#| label: libraries
#| include: false

library(gt)
library(tidyverse)

```

Esse trabalho tem como objetivo central o desenvolvimento e a aplicação de um modelo teórico geral da {{< glossary "supressão de vegetação natural" display="SVN" >}}. Para atingir esse objetivo, uma série de atividades serão conduzidas em sequência:

1.  Desenvolvimento do modelo teórico geral da {{< glossary "supressão de vegetação natural" display="SVN" >}} a partir de uma perspectiva do Realismo Crítico:

    Nessa etapa o modelo teórico é criado a partir de entrevistas e leituras de artigos, livros e teses que abordem o tema da {{< glossary "supressão de vegetação natural" display="SVN" >}}. A seleção de materiais não é feito de forma sistêmica, e não há um método formal para o desenvolvimento do modelo teórico, esse processo é feito de modo livre e espontâneo, ao contrário de @fletcher-2016, que aborda a identificação de mecanismos causais de maneira metodológica.

2.  Análise sociológica da {{< glossary "supressão de vegetação natural" display="SVN" >}} através da aplicação de conceitos desenvolvidos na Teoria Geral dos Campos de Bourdieu:

    A análise sociológica é feita pela caracterização do campo social da {{< glossary "supressão de vegetação natural" display="SVN" >}}, e pela identificação de agentes sociais que fazem parte da disputa dentro desse campo. Esse processo é realizado com base na mesma literatura utilizada no desenvolvimento do modelo teórico. Essa etapa é conduzida através de três passos discutidos por Bourdieu [@grenfell-2018, p.105]: contextualizar o campo social da {{< glossary "supressão de vegetação natural" display="SVN" >}} em relação ao campo do poder; identificar as relações entre agentes sociais que fazem parte do campo social da {{< glossary "supressão de vegetação natural" display="SVN" >}}; analisar o {{< glossary habitus >}} dos agentes sociais dentro do campo social da {{< glossary "supressão de vegetação natural" display="SVN" >}}.  

3.  Análise estatística a partir da aplicação de algorítmos de regressão sobre dados relacionados a {{< glossary "supressão de vegetação natural" display="SVN" >}}:

    A análise estatística será realizada sobre dados com representação espacial e temporal. A seleção dos dados para a análise é baseada na literatura e disponibilidade dos mesmos, porém, para serem incluídos na análise, eles devem obedecer o mecanismo causal proposto pelo modelo teórico. Já a escolha do algorítmo estatístico não tem relação com o modelo teórico, e é feita a partir de um balanço entre complexidade e custo computacional.

4.  Interpretação conjunta dos resultados:

    A interpretação dos resultados das diferentes análises será realizada de maneira conjunta, através da perspectiva ontológica definida pelo Realismo Crítico. A interpretação será feita de maneira que os resultados estejam em sintonia com o modelo teórico proposto, em que serão identificadas lacunas, concordâncias e discordâncias entre os conhecimentos gerados por ambas análises.

A sequência de atividades que compõe a pesquisa é representada na @fig-method-diagram. Apesar do processo ser realizado de modo sequêncial, ele não é linear, e permite circularidades. Ou seja, o modelo teórico pode ser modificado ao longo da condução da pesquisa, que caso aconteça, força uma atualização de todas as etapas subsequentes.

```{mermaid}
%%| label: fig-method-diagram
%%| fig-cap: "Fluxo geral da pesquisa. As atividades realizadas em cada parte da pesquisa são: (1) Consulta da Literatura, Entrevistas, Modelo Teórico; (2) Análise Sociológica; (3) Dados Disponíveis, Estruturação da Base de Dados, Análise Estatística; (4) Interpretação dos Resultados."
%%| fig-responsive: true
%%| fig-align: center

flowchart TD
    A[Consulta da Literatura] --> B[Modelo Teórico]
    C[Entrevistas] --> B
    B --> D[Estruturação da Base de Dados]
    E[Dados Disponíveis] --> D
    B --> F[Análise Sociológica]
    D --> G[Análise Estatística]
    F --> H[Interpretação dos Resultados]
    G --> H

```

O método geral do trabalho (como apresentado na @fig-method-diagram) pode ser caracterizado como um Método Misto Paralelo-Convergente, em que análises quantitativas e qualitativas são conduzidas paralelamente e independentemente (elas não se relacionam de maneira direta), até que seus resultados são interpretados de maneira conjunta. Porém, a idéia central desse trabalho é a adoção de uma perspectiva ontológica e epistemológica única para todas as análises conduzidas. Em teoria, essa idéia é completamente agnóstica em relação aos métodos de análise adotados. Portanto, não é feita uma defesa dos métodos de análise adotados, já que exitiriam uma infinidade de possibilidades metodológicas, mais ou menos apropriadas para o entendimento do fenômeno em questão.

Nas próximas sessões, cada parte do trabalho é descrita em maiores detalhes.

## Modelo Teórico

O modelo teórico é desenvolvido com base em informações obtidas da literatura técnica e científica e entrevistas realisadas com pesquisadores que atuam no tema da {{< glossary "supressão de vegetação natural" display="SVN" >}}. Porém, o desenvolvimento desse modelo teórico também é fortemente afetado pelas minhas experiências pessoais, como exposição à noticias, discussões diversas sobre o tema, e reflexões e indagações pessoais. Portanto, o conteúdo gerado nessa parte da pesquisa não pode ser considerado como produto de um método sistemático e reproduzível. Porém, apesar de se caracterizar como um processo um tanto ametódico, o desenvolvimento do modelo teórico segue uma maneira de se refletir sobre um fenômeno, se inspira em certas proposições metodológicas, e se baseia parcialmente, em uma limitada sistematização de informações.

A maneira de se refletir sobre um fenômeno, adotada nesse trabalho, é baseada na idéia de retrodução do Realismo Crítico. A retrodução pode ser definida como uma atividade de imaginação em que pensamos nos mecanismos generativos que, se de fato forem reais, irão causar um fenômeno quando tais mecanismos forem manifestados [@bhaskar-2016, p.3]. A prática da retrodução implica em um exercício de imaginação que tenta transitar entre os domínios ontológicos do Realismo Crítico, o domínio do empírico, o domínio do atual e o domínio do real [@akram-2023, p.53-54]. Uma ilustração geral e superficial do exercício de retrodução feita nessa pesquisa pode ser feita da seguinte forma: em um cenário hipotético, acredita-se que os {{< glossary "objeto transitivo" display="objetos transitivos" >}} A e B sejam causadores da {{< glossary "supressão de vegetação natural" display="SVN" >}}; a partir disso, nos questionamos quais seriam as condições necessárias para que essa relação de A e a {{< glossary "supressão de vegetação natural" display="SVN" >}} se manifeste; essas condições são traduzidas como o mecanismo generativo proposto; por consequência, nos questionamos se tal mecanismo generativo consegue explicar a relação de causa de B e a {{< glossary "supressão de vegetação natural" display="SVN" >}}. Esse exercício é repetido em qualquer ordem, e a medida que esse processo se sucede, lacunas do mecanismo generativo podem ser identificadas e retificadas, assim como inconsistências podem ser eliminadas, se possível.

O desenvolvimento do modelo teórico também incorpora algumas idéias do método da Teoria Fundamentada [@glaser-1968], e mais especificamente desse método baseado no Realismo Crítico, como proposto por @oliver-2011 e @hoddy-2018. Nesse projeto, a condução de entrevistas e consultas da literatura são sistematizadas em forma de dados qualitativos estruturados, contendo as idéias centrais obtidas a partir desses materiais. Essa sistematização de dados é feita de maneira concomitante com o desenvolvimento do modelo teórico.

O processo de sistematização de informação, na forma de dados qualitativos estruturados em tabela, é baseado nas entrevistas e nas consultas à literatura. As entrevistas são feitas de modo a especular sobre possíveis causas da {{< glossary "supressão de vegetação natural" display="SVN" >}}, de maneira semelhante ao processo de retrodução ilustrado anteriormente. A partir das indagações feitas durante as entrevistas, são desenvolvidas questões que servem de base para buscas na literatura, que por sua vez fornecem mais informações sobre o fenômeno em questão, a {{< glossary "supressão de vegetação natural" display="SVN" >}}. Após cada rodada de entrevistas e de consultas à literatura, a forma de condução das entrevistas seguintes podem ser alteradas de acordo com o conhecimento gerado pelas anteriores.

Os dados, coletados a partir das entrevistas e consultas à literatura, contém as seguintes informações: identificação da fonte da informação (de forma anônima no caso das entrevistas); os {{< glossary "objeto transitivo" display="objetos transitivos" >}} identificados como relacionados a {{< glossary "supressão de vegetação natural" display="SVN" >}}; a descrição da relação entre os  {{< glossary "objeto transitivo" display="objetos transitivos" >}} com a {{< glossary "supressão de vegetação natural" display="SVN" >}}.


```{mermaid}
%%| label: fig-theoretical-diagram
%%| fig-cap: Fluxo geral do processo de desenvolvimento do modelo teórico.
%%| fig-responsive: true
%%| fig-align: center

flowchart TD
    A[Entrevista] --> B[Dados]
    C[Questões] --> D[Consulta da Literatura]
    D --> E[Data]
    B --> F[Modelo Teórico]
    A --> F
    D --> F
    F --> C
    E --> F
    F --> A

```

O processo de desenvolvimento do modelo teórico não apresenta um ponto final determinado. O modelo teórico pode ser modificado caso haja a descoberta de novos conhecimentos que desafiem a lógica do modelo. Porém, nesse projeto, a etapa de desenvolvimento do modelo teórico é interrompida quando as informações obtidas se tornem redundantes o bastante para que não seja necessária a modificação do modelo.

O modelo teórico será baseado em conceitos do Realismo Crítico, sendo formado sobre especulações da existência de certos {{< glossary "objeto intransitivo" display="objetos intransitivos" >}}, e da existência de interações entre eles, formando um {{< glossary "mecanismo generativo" >}} da {{< glossary "supressão de vegetação natural" display="SVN" >}}.

### Entrevistas

As entrevistas conduzidas nesse projeto, tem o objetivo de obter informações sobre os fatores que afetam a ocorrência da {{< glossary "supressão de vegetação natural" display="SVN" >}}. Essas informações servem de base para o desenvolvimento do modelo teórico da {{< glossary "supressão de vegetação natural" display="SVN" >}}.

O método utilizado é de entrevistas semi-estruturadas. O roteiro das entrevistas é baseado em sugestões propostas por @bearman-2019, em que são priorizadas questões abertas, que incentivam descrições ricas nas respostas dos participantes. Também foram incorporados elementos da metodologia de entrevistas Centradas em Problemas (PCI) [@witzel-2012], em que as entrevistas contém uma estrutura definida e centrada no fenômeno de interesse, mas que apresenta uma flexibilidade para incentivar respostas abertas e profundas [@doringer-2020].

O público alvo para participar nas entrevistas são pesquisadores, de diferentes disciplinas, atuantes no tema da {{< glossary "supressão de vegetação natural" display="SVN" >}}. As entrevistas serão feitas a distância, através de vídeo chamadas. Esse meio de entrevista tem sido frequentemente adotado em pesquisas qualitativas, e apesar de apresentarem desvantagens, como falhas técnicas durante as entrevistas, não há evidências claras de que os dados coletados apresentem menor riqueza de informações, em comparação com entrevistas presenciais [@thunberg-2021]. Além disso, o acesso a participantes é mais amplo, devido a falta de necessidade de deslocamento.

O roteiro das entrevistas pode ser dividido em três partes (@tbl-schedule). A parte introdutória da entrevista contém uma exposição sobre o tema e objetivos dessa pesquisa, assim como a motivação para a realização das entrevistas. A parte de desenvolvimento da entrevista contém perguntas inciais que estimulam a criação de uma narrativa por parte dos entrevistados, seguidas por perguntas mais específicas sobre o fenômeno em questão [@witzel-2012]. Por fim, a conclusão dá a oportunidade aos entrevistados de elaborar reflexões sobre o tema [@bearman-2019].

```{r}
#| label: tbl-schedule
#| tbl-cap: Roteiro de entrevistas adotado.
#| echo: false

tibble::tribble(
  ~id, ~section, ~description, ~sub,
  1, "Introdução", "Introdução à pesquisa e ao autor", 0,
  2, "Introdução", "Clarificação dos objetivos da pesquisa", 0,
  3, "Introdução", "Clarificação da motivação das entrevistas", 0,
  4, "Introdução", "Checagem de consentimento e do tempo disponível para a entrevista", 0,
  5, "Desenvolvimento", "Contextualização de experiências prévias do participante com o tema da SVN", 0,
  5, "Desenvolvimento", "- Quais foram suas experiências mais importantes dentro do tema da SVN?", 1,
  5, "Desenvolvimento", "- Quais foram as regiões que você desenvolveu projetos dentro do tema da SVN?", 1,
  6, "Desenvolvimento", "Identificação de objetos que afetam a SVN", 0,
  6, "Desenvolvimento", "- Qual é a sua perspectiva sobre a importância da SVN, em relação a sustentabilidade e desenvolvimento?", 1,
  6, "Desenvolvimento", "- De acordo com sua experiência, quais são os fatores mais importantes que afetam a SVN?", 1,
  7, "Desenvolvimento", "Identificação das relações entre os objetos e a SVN", 0,
  7, "Desenvolvimento", "- Quais são as condições necessárias para que tal fator tenha um impacto importante na SVN?", 1,
  7, "Desenvolvimento", "- Quais são os grupos de pessoas que participam desse fator? E como elas acabam afetando a SVN?", 1,
  8, "Conclusão", "Reflexões sobre a SVN", 0,
  8, "Conclusão", "- Você acredita na possibilidade de que a SVN seja suprimida a ponto de não ser um problema socioambiental?", 1,
  8, "Conclusão", "- Na sua opinião, existem condições em que a SVN é justificável apesar de seus impactos?", 1,
  9, "Conclusão", "Oportunidade para o entrevistado realizar comentários abertos", 0,
  10, "Conclusão", "Encerramento da entrevista", 0
) |>
  gt::gt(groupname_col = c("section")) |>
  gt::cols_hide(columns = c(id, sub)) |>
  gt::tab_options(
    table.font.size = 14,
    column_labels.hidden = TRUE,
    table.width = gt::pct(90)
  ) |>
  gt::tab_style(
    style = list(
      gt::cell_text(
        indent = gt::pct(5),
        style = "italic"
      ),
      gt::cell_fill(color = "#e9e9e9")
    ),
    locations = gt::cells_body(
      columns = c(description),
      rows = sub %in% c(1)
    )
  ) |>
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  ) |>
  gt::opt_stylize(style = 1, color = "gray", add_row_striping = FALSE)

```

Cada entrevista irá fornecer informações que servem de conteúdo para a geração de uma tabela de dados. Nessa tabela, são identificados os {{< glossary "objeto transitivo" display="objetos transitivos" >}} associados com a {{< glossary "supressão de vegetação natural" display="SVN" >}}, e são descritas as condições necessárias para que essa associação ocorra.

```{r}
#| label: tbl-interviewdata
#| tbl-cap: Ilustração da tabela de dados gerada com base nas informações obtidas através das entrevistas.
#| echo: false

tibble::tribble(
  ~id, ~participante, ~objeto, ~condição,
  1, "Entrevistado 1", "Objeto A", "Condições X, Y e Z",
  2, "Entrevistado 1", "Objeto B", "Condições W e K",
  3, "Entrevistado 2", "Objeto A", "Condições P e I"
) |>
  gt::gt() |>
  gt::tab_options(
    table.font.size = 14,
    table.width = gt::pct(90),
    quarto.use_bootstrap = TRUE,
    quarto.disable_processing = FALSE
  ) |>
  gt::opt_stylize(style = 1, color = "gray", add_row_striping = TRUE) |>
  gt::as_raw_html()

```

### Consultas à Literatura

Assim como as entrevistas, a consulta à literatura tem o objetivo de obter informações sobre os fatores que afetam a ocorrência da {{< glossary "supressão de vegetação natural" display="SVN" >}}, servindo de base para o desenvolvimento do modelo teórico.

A literatura consultada é de natureza diversa, podem ser artigos publicadas em periódicos científicos, livros, documentos técnicos, dissertações e teses, não sendo limitadas entre essas citadas. O motivo para essa abrangência é a de ter amplo acesso a documentos diversos sobre qualquer conteúdo relacionado à {{< glossary "supressão de vegetação natural" display="SVN" >}}.

A busca por tais documentos é feita através de ferramenta de buscas amplas, ou mais específicas de documentos acadêmicos. O processo de buscas não apresenta um método sistemático, e é feita de maneira livre. A forma das buscas é feita através do uso de palavras-chave, identificadas em indagações feitas com base em informações obtidas através das entrevistas e consultas à literatura anteriores. As buscas também são feitas com bases em citações encontradas em documentos consultados.

Na medida do possível, as informações obtidas através das consultas são sistematizadas em uma tabela. Isso tem o objetivo de facilitar comparações entre os conteúdos de diferentes fontes. Essa tabela contém informações semelhantes a @tbl-interviewdata, porém, com dados adicionais que permitem a identificação da origem do dado (@tbl-literaturedata).

```{r}
#| label: tbl-literaturedata
#| tbl-cap: Ilustração da tabela de dados gerada com base nas informações obtidas através das consultas à literatura.
#| echo: false

tibble::tribble(
  ~id, ~doi, ~autor, ~titulo, ~ano, ~local, ~objeto, ~condição,
  1, "https://doi.org/...1", "Fulano", "Algo sobre algo", "1968", "Lá longe", "Objeto A", "Condições X, Y e Z",
  2, "https://doi.org/...1", "Fulano", "Algo sobre algo", "1968", "Lá longe", "Objeto B", "Condições W e K",
  3, "https://doi.org/...2", "Sicrano et al.", "Isto sobre aquilo", "2001", "Logo ali", "Objeto A", "Condições P e I"
) |>
  gt::gt() |>
  gt::tab_options(
    table.font.size = 14,
    table.width = gt::pct(90),
    quarto.use_bootstrap = TRUE,
    quarto.disable_processing = FALSE
  ) |>
  gt::opt_stylize(style = 1, color = "gray", add_row_striping = TRUE) |>
  gt::as_raw_html()

```

É importante reforçar que, o desenvolvimento do modelo teórico, não é baseado restritamente aos dados presentes nas tabelas [-@tbl-interviewdata] e [-@tbl-literaturedata]. Isso proporciona uma maior liberdade para o processo de reflexão de desenvolvimento do modelo teórico, que também é afetado pelos métodos de análise adotados.

Além disso, a justificativa para a adoção de um processo ametódico de consulta à literatura, se baseia na vantagem de proporcionar maior liberdade de pensamento, mas também na ausência de um motivo forte para a realização de um processo metódico. Por exemplo, caso o objetivo da consulta à literatura fosse identificar as causas da {{< glossary "supressão de vegetação natural" display="SVN" >}} mais citadas na literatura científica, seria então aconselhável adotar um método de revisão sistemática. Esse não é o caso dessa pesquisa.

## Análise Sociológica

A análise sociológica será feita através da Teoria Geral dos Campos desenvolvida por Bourdieu, aplicada como perspectiva analítica do modelo teórico da {{< glossary "supressão de vegetação natural" display="SVN" >}}. A análise será conduzida através da adaptação de três passos, identificados por @grenfell-2018:

1. Descrever a posição do {{< glossary "campo" >}} analisado em relação ao {{< glossary "campo do poder" >}};

2. Descrever as posições ocupadas pelos {{< glossary "agente social" display="agentes sociais" >}} que participam do das disputas dentro do {{< glossary "campo" >}} analisado. E caracterizar as relações entre cada posição ocupada por cada {{< glossary "agente social" >}}. As posições são caracterizadas pelo {{< glossary "capital" >}} de cada {{< glossary "agente social" >}}, pelo objetivo do {{< glossary "agente social" >}} em relação ao fenômeno de interesse, e pela forma como um certo tipo de {{< glossary "capital" >}} influencia um {{< glossary "agente social" >}} a atingir seu objetivo;

3. Caracterizar as disposições dos {{< glossary "agente social" display="agentes sociais" >}} em relação ao fenômeno de interesse, e como essas disposições influênciam as ações tomadas com o objetivo desses agentes. Isso é feito através do conceito de {{< glossary "habitus" >}}.



## Análise Estatística

The statistical analysis is responsible for exploring relationships of observed variables within the exercise of predicting NVS. It is performed by structuring a database of observed variables that are considered to be a possible cause of the NVS, followed by a selection of variables according to the theoretical model, and finally the prediction of NVS.

### Database Structuring

The database contains data from different social and natural dimensions, which can be available in diverse formats and structures. To make the modeling process more efficient and transparent, all variables of interest must be organized coherently.

The process to create the database consists of accessing the data sources, downloading the data to the local environment, transforming and organizing the data to the grid, and store in the local environment.

```{mermaid}
%%| label: fig-data-diagram
%%| fig-cap: Diagram of the process to create the project database.
%%| fig-responsive: true
%%| fig-align: center

flowchart TD
    A[Data Source] --> E[Pre Processing]
    B[Base Grid] --> E[Pre Processing]
    E[Pre Processing] --> F[Gridded Data]
    F[Gridded Data] --> G[Database]

```

The data are stored in a nested directories database with hive-style partitioning. The database is composed of a collection of parquet files, a format with high compression, that facilitates processing large volumes of data. The main partition stores the variables, which means that each variable will be stored in a separate directory. If necessary, the data will be partitioned by further variables (as a rule of thumb, each parquet file should not be smaller than 20MB and not bigger than 2GB).

To structure a collection of data that presents different natures, I must transform all the variables into a standard grid system. The grid system will be composed of 0.2 degrees cells (40km x 40km), which should be a balanced compromise between detail and computational cost.

```{r}
#| label: fig-base-grid
#| fig-cap: "Model grid, in which variables were transformed to."
#| fig-asp: 1
#| echo: false
#| dev: "ragg_png"

load("./figs/base_grid.rdata")

#viz_grid

```

Each grid cell contains one observation, for each year, for all the variables.

### Model Development

The statistical model follow the standard approach to develop supervised models.

The variables selection will be performed according to available data of possible causes of NVS (as stated in the theoretical model), the selection will also be performed to remove variables that can induce unwanted bias in the results, such as colliders and mediators.

The data splitting between training and training, validation and testing groups will be performed in order to avoid spatial and temporal correlation between observations.

The parameters adjustments will be performed by cross validation methods for resampling and racing techniques for parameter optimization. In this process, validation data will be used for parameter adjustments.

After the final model fit, accuracy metrics will be calculated in order to estimate the error of the statistical model. Along with the accuracy assessment, a series of model interpretation techniques will be applied in order to understand the model results.

The main steps are shown in @fig-model-diagram.

```{mermaid}
%%| label: fig-model-diagram
%%| fig-cap: Diagram of the modelling process.
%%| fig-responsive: true
%%| fig-align: center

flowchart TD
    A[Database] --> B[Variables Selection]
    B[Variables Selection] --> C[Data Split]
    C[Data Split] --> D[Training Data]
    D[Training Data] --> E[Pre Processing]
    E[Pre Processing] --> F[Initial Model Fit]
    C[Data Split] --> G[Validation Data]
    C[Data Split] --> H[Test Data]
    F[Initial Model Fit] --> I[Parameters Adjustments]
    G[Validation Data] --> I[Parameters Adjustments]
    I[Parameters Adjustments] --> J[Final Model Fit]
    H[Test Data] --> K[Model Assessment]
    J[Final Model Fit] --> K[Model Assessment]
    J[Final Model Fit] --> L[Model Interpretation]
    K[Model Assessment] --> L[Model Interpretation]

```

The regression algorithms used to predict NVS are based on Decision Trees (DT) and ensemble techniques, that are Random Forest (RF), Bayesian Additive Regression Trees (BART) and Gradient Boosting Decision Trees (GBDT). Using models with different complexity, but a common framework is useful to interpret the results.

::: {.callout-important collapse="true"}
READ: spatial models

-   <https://doi.org/10.3390/ijgi10090600>
-   <https://doi.org/10.1007/s00168-021-01101-x>

READ: causality for feature selection

-   <https://arxiv.org/pdf/2207.04053.pdf>
-   <https://doi.org/10.1145/3409382>

READ: variables related to NVS

-   <https://doi.org/10.1371/journal.pone.0269729>
:::

## Results Interpretation

The interpretation of quantitative and qualitative results are performed in conjunction to find underlying mechanisms of how the dispute between social actors also influence the variables that cause NVS. The interpretation is done by comparing the results from the sociological and statistical analysis, searching for convergences, divergences and possible gaps in the explanation of the causes of NVS.

This interpretation allows the development of an updated theoretical model of NVS.

# References {.unnumbered}